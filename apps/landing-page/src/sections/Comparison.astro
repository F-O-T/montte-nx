---
import type { SupportedLng } from "@packages/localization";

interface Props {
   lang?: SupportedLng;
}

const { lang: _lang = "pt-BR" } = Astro.props;

const _competitors = [
   {
      id: "spreadsheets",
      name: "Planilhas Manuais",
      price: "Incalculável",
      priceLabel: "(horas perdidas + risco de erro)",
      barWidth: "100%",
   },
   {
      id: "closedApps",
      name: "ERPs Tradicionais",
      price: "R$ 500+",
      priceLabel: "por mês + taxa de implantação",
      barWidth: "75%",
   },
   {
      id: "montte",
      name: "Ecossistema Montte",
      price: "R$ 39",
      priceLabel: "por mês (preço fixo)",
      barWidth: "25%",
      highlighted: true,
   },
];

const _usageTiers = [
   {
      value: "Essencial",
      label: "para freelancers",
      sublabel: "Comece Grátis",
   },
   {
      value: "Growth",
      label: "para times ágeis",
      sublabel: "no plano Pro",
   },
   {
      value: "Ilimitado",
      label: "via Open Source",
      sublabel: "Soberania de dados",
   },
];

const _stats = [
   {
      prefix: "Comece com",
      value: "R$39",
      suffix: "por mês",
   },
   {
      prefix: "ou use a versão",
      value: "Grátis",
      suffix: "Community Edition",
   },
];
---

<section id="comparison" class="bg-background py-16 md:py-24">
   <div class="mx-auto flex max-w-6xl flex-col gap-y-10 px-4 md:items-center md:justify-between md:px-6 lg:flex-row lg:gap-x-16 xl:gap-x-20">
      <div class="max-lg:w-full max-lg:max-w-[629px]">
         <div class="flex max-w-[356px] flex-col max-lg:pl-4">

            <h2 class="mt-2 max-w-[629px] bg-linear-to-r from-emerald-400 to-emerald-600 bg-clip-text pb-2 text-[28px] font-bold leading-[108%] text-transparent md:text-[40px]">
               Governança de elite.
               <br />
               Custo de startup.
            </h2>

            <p class="text-muted-foreground mt-3 max-w-[441px] leading-[145%] tracking-[-0.01em]">
               Abandone o risco das planilhas quebravéis e o custo proibitivo dos ERPs corporativos. Tenha o controle financeiro de uma grande empresa por um valor que cabe no bolso.
            </p>

            <div class="mt-6">
               <Button
                  variant="outline"
                  className="rounded-full h-[37px] px-3 text-[13px] group"
                  asChild
               >
                  <a href="#pricing">
                     <span class="leading-[100%]">Ver tabela de preços</span>
                     <ChevronRight class="text-muted-foreground size-3 group-hover:text-white" />
                  </a>
               </Button>
            </div>
            <div class="mt-10 flex gap-x-14 md:gap-x-16">
               {stats.map((stat) => (
                  <div class="flex flex-col gap-y-1">
                     <p class="text-muted-foreground text-[13px] leading-[145%]">
                        {stat.prefix}
                     </p>
                     <p class="text-[28px] font-bold leading-[117%] text-white">
                        {stat.value}
                     </p>
                     <p class="text-muted-foreground text-[13px] leading-[145%]">
                        {stat.suffix}
                     </p>
                  </div>
               ))}
            </div>
         </div>
      </div>

      <Card className="border-border/10 w-full flex-1 gap-0 rounded-[26px] p-4 md:w-full md:min-w-[540px] md:max-w-[641px] xl:min-w-[641px]">
         <CardHeader className="bg-muted border-border/10 w-full overflow-hidden rounded-t-xl border px-0">
            <div class="flex flex-col bg-[hsl(var(--card)/0.5)] px-4 py-6 text-base leading-[145%] md:flex-row md:items-center md:justify-between md:px-10">
               {usageTiers.map((tier, index) => (
                  <>
                     <div class="border-border/10 flex w-full flex-col max-md:border-b max-md:border-dashed max-md:pb-3 md:w-auto">
                        <CardTitle className="text-[28px] font-bold leading-[145%] text-white font-sans">{tier.value}</CardTitle>
                        <CardDescription className="text-muted-foreground text-base">{tier.label}</CardDescription>
                        <CardDescription className="text-muted-foreground text-base">{tier.sublabel}</CardDescription>
                     </div>
                     {index < usageTiers.length - 1 && (
                        <Separator orientation="vertical" className="border-border/10 hidden h-[61px] border-l border-dashed bg-transparent md:block" />
                     )}
                  </>
               ))}
            </div>
         </CardHeader>

         <CardContent className="bg-muted border-border/10 rounded-b-xl border border-t-0 p-0">
            <ItemGroup className="px-2">
               {competitors.map((competitor, index) => (
                  <>
                     <Item className="flex-col gap-y-4 py-6 md:flex-row md:items-center">
                        <ItemMedia className="w-[247px] justify-start gap-x-2">
                           <div class:list={[
                              "flex size-6 shrink-0 items-center justify-center rounded-full",
                              competitor.highlighted
                                 ? "bg-linear-to-r from-emerald-400 to-emerald-600"
                                 : "bg-[hsl(var(--muted))]"
                           ]}>
                              {competitor.id === "montte" ? (
                                 <svg class="size-3.5" viewBox="0 0 1987 1278" fill="none">
                                    <path d="M455.313 377.152L0.812988 1275.15L904.813 1276.15L455.313 377.152Z" fill="#0C5343"/>
                                    <path d="M1613.81 1276.15L995.313 1276.65L681.813 656.152L682.313 655.152L994.313 1.15186L1614.81 1276.15H1613.81Z" fill="#42B46E"/>
                                    <path d="M1394.81 655.152L1533.31 376.652L1985.8 1276.15H1701.81L1394.81 655.152Z" fill="#379255"/>
                                 </svg>
                              ) : competitor.id === "spreadsheets" ? (
                                 <Table class="size-3.5 text-muted-foreground" />
                              ) : (
                                 <Lock class="size-3.5 text-muted-foreground" />
                              )}
                           </div>
                           <ItemTitle className="font-medium leading-[145%] tracking-[-0.16px] text-white">
                              {competitor.name}
                           </ItemTitle>
                        </ItemMedia>
                        <ItemContent>
                           <div
                              class:list={[
                                 "h-[13px] rounded-[44px]",
                                 competitor.highlighted
                                    ? "bg-linear-to-r from-emerald-400 to-emerald-600"
                                    : "border-border/5 bg-muted/50 border"
                              ]}
                              style={`width: ${competitor.barWidth};`}
                           />
                           <ItemDescription className="text-muted-foreground mt-2 text-base leading-[145%] tracking-[-0.14px]">
                              {!competitor.highlighted && " "}
                              <span class="text-white">{competitor.price}</span>
                              {" "}{competitor.priceLabel}
                           </ItemDescription>
                        </ItemContent>
                     </Item>
                     {index < competitors.length - 1 && (
                        <ItemSeparator className="border-border/10 border-t border-dashed bg-transparent" />
                     )}
                  </>
               ))}
            </ItemGroup>

            <div class="px-6 pb-4 pt-2 flex w-full items-center justify-center">
               <p class="text-muted-foreground max-w-[610px] text-center text-[10px] leading-[145%] tracking-[-1%]">
                  Plano Pro: R$39/mês para até 10 membros e automações ilimitadas.
                  Auto-hospedado (Self-hosted): 100% gratuito, auditável e sem limites de uso na sua infraestrutura.
               </p>
            </div>
         </CardContent>
      </Card>
   </div>
</section>
