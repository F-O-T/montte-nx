---
import type { SupportedLng } from "@packages/localization";
import { translate } from "@packages/localization";

interface Props {
   lang?: SupportedLng;
}

const { lang = "pt-BR" } = Astro.props;
const brandName = translate("common.brand.name", { lng: lang });
---

<nav
   id="sticky-navbar"
   class="fixed top-0 inset-x-0 h-16 bg-background/50 backdrop-blur-md border-b border-primary/1 z-50 shadow-sm [background-image:linear-gradient(to_right,transparent,theme(colors.primary/5),transparent)] [background-position:0_100%] [background-size:100%_1px] [background-repeat:no-repeat]"
>
   <div class="h-full flex items-center justify-between max-w-6xl mx-auto px-8 sm:px-6 lg:px-8">
      <a
         href="/"
         class="flex items-center gap-3 transition-transform duration-300 hover:scale-105"
      >
         <Logo size={32} class="text-primary"/>
         <span class="text-xl font-bold text-foreground hidden sm:block">
            {brandName}
         </span>
      </a>

      <div class="hidden md:block">
         <NavMenu lang={lang} client:load/>
      </div>

      <div class="flex items-center gap-3">
         <div class="transition-transform duration-300 hover:scale-110">
            <ThemeToggler/>
         </div>

         <Button className="hidden md:block">
            <a
               href="https://app.montte.co/auth/sign-in"
               target="_blank"
               rel="noopener noreferrer"
               class="no-underline text-white"
            >
               Come√ßar
            </a>
         </Button>

         <div
            class="md:hidden transition-transform duration-300 hover:scale-110"
         >
            <MobileMenu lang={lang} client:load/>
         </div>
      </div>
   </div>
</nav>





<script>
   function initStickyNavbar() {
      const stickyNavbar = document.getElementById("sticky-navbar");

      if (!stickyNavbar) return;

      const addSmoothScrolling = () => {
         const navLinks = stickyNavbar.querySelectorAll('a[href^="#"]');
         navLinks.forEach((link) => {
            link.addEventListener("click", (e) => {
               const href = link.getAttribute("href");
               if (href && href.startsWith("#")) {
                  const target = document.querySelector(href);
                  if (target) {
                     e.preventDefault();
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }
            });
         });
      };

      addSmoothScrolling();
   }

   if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initStickyNavbar);
   } else {
      initStickyNavbar();
   }
</script>
